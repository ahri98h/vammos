(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{95338:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return s(94894)}])},94894:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return CheckoutPage}});var t=s(85893),l=s(67294),n=s(48165),o=s(53120),c=s(52797),r=s(83454),Payments_CheckoutForm=function(e){let{amount:a=120}=e,[s,n]=(0,l.useState)("pix"),[o,d]=(0,l.useState)(!1),{addToast:i}=(0,c.p)(),handlePay=async()=>{d(!0);try{let e=r.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",t=await fetch("".concat(e,"/api/payments/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},body:JSON.stringify({amount:a,method:s}),credentials:"include"});if(!t.ok)throw Error("Erro no pagamento");let l=await t.json();i("Pagamento realizado (mock). ID: "+(l.id||"MOCK"),"success")}catch(e){i("Pagamento simulado com sucesso (fallback).","info")}finally{d(!1)}};return(0,t.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Pagamento"}),(0,t.jsxs)("p",{className:"mb-4",children:["Valor: ",(0,t.jsxs)("strong",{children:["R$ ",a.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,t.jsxs)("label",{className:"block p-3 border rounded ".concat("pix"===s?"border-blue-500 bg-blue-50":""),children:[(0,t.jsx)("input",{type:"radio",name:"method",checked:"pix"===s,onChange:()=>n("pix")})," ",(0,t.jsx)("span",{className:"ml-2 font-semibold",children:"PIX (QR)"})]}),(0,t.jsxs)("label",{className:"block p-3 border rounded ".concat("card"===s?"border-blue-500 bg-blue-50":""),children:[(0,t.jsx)("input",{type:"radio",name:"method",checked:"card"===s,onChange:()=>n("card")})," ",(0,t.jsx)("span",{className:"ml-2 font-semibold",children:"Cart\xe3o de Cr\xe9dito"})]}),(0,t.jsxs)("label",{className:"block p-3 border rounded ".concat("boleto"===s?"border-blue-500 bg-blue-50":""),children:[(0,t.jsx)("input",{type:"radio",name:"method",checked:"boleto"===s,onChange:()=>n("boleto")})," ",(0,t.jsx)("span",{className:"ml-2 font-semibold",children:"Boleto"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:handlePay,disabled:o,className:"px-4 py-2 bg-green-600 text-white rounded",children:o?"Processando...":"Pagar"}),(0,t.jsx)("button",{onClick:()=>i("Pagamento cancelado","info"),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancelar"})]})]})},Loyalty_LoyaltyPanel=function(){let[e,a]=(0,l.useState)(0);(0,l.useEffect)(()=>{let e=parseInt(localStorage.getItem("loyalty_points")||"0",10);a(e)},[]);let earn=s=>{let t=e+s;localStorage.setItem("loyalty_points",t),a(t)},redeem=s=>{if(e<s)return alert("Pontos insuficientes");let t=e-s;localStorage.setItem("loyalty_points",t),a(t),alert("Cupom aplicado: R$ "+(s/10).toFixed(2))};return(0,t.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Programa de Fidelidade"}),(0,t.jsxs)("p",{className:"mb-2",children:["Pontos acumulados: ",(0,t.jsx)("strong",{children:e})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>earn(10),className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Ganhar 10 pts"}),(0,t.jsx)("button",{onClick:()=>redeem(50),className:"px-3 py-2 bg-green-600 text-white rounded",children:"Resgatar 50 pts"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"1 ponto = R$0.10 (exemplo)"})]})},d=s(5152),i=s.n(d);let m=i()(()=>s.e(375).then(s.bind(s,25375)),{loadableGenerated:{webpack:()=>[25375]},ssr:!1});function CheckoutPage(){return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,t.jsx)(n.Z,{}),(0,t.jsxs)("main",{className:"flex-grow max-w-3xl mx-auto p-6 space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Checkout"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"card",children:(0,t.jsx)(Payments_CheckoutForm,{})}),(0,t.jsx)("div",{className:"card",children:(0,t.jsx)(Loyalty_LoyaltyPanel,{})})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(m,{})})]}),(0,t.jsx)(o.Z,{})]})}}},function(e){e.O(0,[216,708,774,336,888,179],function(){return e(e.s=95338)}),_N_E=e.O()}]);